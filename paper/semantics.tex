We start by giving a standard semantics of types and well typed (but not necessarily well resourced) terms into sets.

\begin{displaymath}
  \begin{array}{ll}
    \llbracket \base \rrbracket = A_\base \\
    \llbracket \fun{S}{T} \rrbracket = \llbracket S \rrbracket \rightarrow \llbracket T \rrbracket &
    \llbracket \excl{\rho}{S} \rrbracket = \llbracket S \rrbracket \\
    \llbracket \tensorOne \rrbracket = \llbracket \withTOne \rrbracket = \{*\} &
    \llbracket \tensor{S}{T} \rrbracket = \llbracket \withT{S}{T} \rrbracket = \llbracket S \rrbracket \times \llbracket T \rrbracket \\
    \llbracket \sumTZero \rrbracket = \{\} &
    \llbracket \sumT{S}{T} \rrbracket = \llbracket S \rrbracket \uplus \llbracket T \rrbracket \\
  \end{array}
\end{displaymath}

The semantics of contexts and terms are as usual.

Using this, we give a semantics of types $T$ into functors from $\mathcal{W}^{op}$ to $\mathrm{Rel}\ \llbracket T \rrbracket$, where $\mathcal{W}$ is a symmetric promonoidal category and $\mathrm{Rel}\ A$ is the category of binary relations on $A$.

\begin{displaymath}
  \begin{array}{lll}
    \llbracket \base \rrbracket^R & = & R_\base b\\
    \llbracket \fun{S}{T} \rrbracket^R w (f, f') & = & \forall x,y. P(y,w)x \implies \phantom{X} \\
    \quad \forall s,s'. \llbracket S \rrbracket^R y (s, s') \implies \llbracket T \rrbracket^R x (f\ s, f'\ s') \span \span \\
    \llbracket \tensorOne \rrbracket^R w (*, *) & = & J w \\
    \llbracket \tensor{S}{T} \rrbracket^R w ((s, t), (s', t')) & = & \\
    \quad \exists x,y. P(x,y)w \wedge \llbracket S \rrbracket^R x (s, s') \wedge \llbracket T \rrbracket^R y (t, t') \span \span \\
    \llbracket \withTOne \rrbracket^R w (*, *) & = & \top \\
    \llbracket \withT{S}{T} \rrbracket^R w & = & \llbracket S \rrbracket^R w \times_R \llbracket T \rrbracket^R w \\
    \llbracket \sumTZero \rrbracket^R w (s, s') & \mathrm{impossible} \span \\
    \llbracket \sumT{S}{T} \rrbracket^R w & = & \llbracket S \rrbracket^R w \uplus_R \llbracket T \rrbracket^R w \\
    \llbracket \excl{\rho}{S} \rrbracket^R & = & \oc_\rho \llbracket S \rrbracket^R \\
  \end{array}
\end{displaymath}

$R \times_R S$ and $R \uplus_R S$ are defined pointwise.
We assume a family of natural transformations $\oc$ satisfying the following laws.

\begin{displaymath}
  \begin{array}{l}
    \rho \leq \pi \implies (\oc_\pi R\ w \implies \oc_\rho R\ w) \\
    \oc_0 R\ w \implies J w \\
    \oc_{\rho+\pi} R\ w\ (a, b) \implies \exists x,y. P(x,y)w \wedge \oc_\rho R\ x\ a \wedge \oc_\pi R\ y\ b \\
    \oc_1 R\ w \iff R\ w \\
    \oc_{\rho \cdot \pi} R\ w \iff \oc_\rho(\oc_\pi R)\ w
  \end{array}
\end{displaymath}

The semantics of a context $\ctxvar{x_1}{S_1}{\rho_1}, \ldots, \ctxvar{x_n}{S_n}{\rho_n}$ is given by $\tensor{\llbracket \excl{\rho_1}{S_1}}{\tensor{\ldots}{\excl{\rho_n}{S_n}}} \rrbracket^R$.

This indexed relational semantics gives us a family of logical relations.
The fundamental lemma is as follows.

\begin{displaymath}
  \ctx{\Gamma}{\Delta} \vdash t : S \implies \llbracket \ctx{\Gamma}{\Delta} \rrbracket^R w\ (\gamma, \gamma') \implies \llbracket t \rrbracket^R w\ (s, s')
\end{displaymath}


% Local Variables:
% TeX-master: "quantitative"
% End:
